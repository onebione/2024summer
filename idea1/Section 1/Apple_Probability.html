<!DOCTYPE html>
<html>
<head>
    <title>Apple Probability Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            margin: 50px;
        }
        input[type="number"] {
            width: 100px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Apple Probability Calculator</h1>
        <label for="Apples_Total">Apples in Total:</label>
        <input type="number" id="Apples_Total" placeholder="Apples in Total">
        <br><br>
        <label for="Poisonous">Poisonous Apples:</label>
        <input type="number" id="Poisonous" placeholder="Poisonous Apples">
        <br><br>
        <label for="Apples_To_Kill">Amount of Poisonous Apples to kill:</label>
        <input type="number" id="Apples_To_Kill" placeholder="Apples to kill">
        <br><br>
        <label for="Apples_Eat">Amount of Apples You Will Eat:</label>
        <input type="number" id="Apples_Eat" placeholder="Apples to eat">
        <br><br>
        <button onclick="calculateProbability()">Calculate</button>
        <h2>Result: <span id="result"></span></h2>
    </div>

    <script>
        function calculateProbability() {
            const Apples_Total = parseInt(document.getElementById('Apples_Total').value);
            const Poisonous = parseInt(document.getElementById('Poisonous').value);
            const Apples_To_Kill = parseInt(document.getElementById('Apples_To_Kill').value);
            const Apples_Eat = parseInt(document.getElementById('Apples_Eat').value);
            
            if (isNaN(Apples_Total) || isNaN(Poisonous) || isNaN(Apples_To_Kill) || isNaN(Apples_Eat)) {
                alert("Please enter valid numbers in all fields.");
                return;
            }

            if (Apples_To_Kill > Poisonous || Apples_Eat > Apples_Total) {
                document.getElementById('result').textContent = "You'll be fine, the apple amounts make no sense";
                return;
            }

            let alive_outcomes = 0;
            let total_outcomes = 0;

            function binomial_coefficients(N, K) {
                if (K > N) {
                    return 0;
                }
                return factorial(N) / (factorial(K) * factorial(N - K));
            }

            function factorial(n) {
                if (n === 0) {
                    return 1;
                }
                return n * factorial(n - 1);
            }

            for (let case_num = 0; case_num < Apples_To_Kill; case_num++) {
                let var1 = binomial_coefficients(Poisonous, case_num);
                let var2 = binomial_coefficients(Apples_Total - Poisonous, Apples_Eat - case_num);
                alive_outcomes += var1 * var2;
            }

            total_outcomes = binomial_coefficients(Apples_Total, Apples_Eat);

            const probability = ((alive_outcomes / total_outcomes) * 100).toFixed(2) + "%";
            document.getElementById('result').textContent = probability;
        }
    </script>
</body>
</html>
